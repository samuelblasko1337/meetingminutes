KURZUEBERSICHT WORKFLOW

Transport/Start:

HTTP laeuft immer (MCP_HTTP_PORT ist Pflicht; Listener auf /mcp).
Der Server startet ausschliesslich als HTTP MCP.
Fuer nicht-lokale Hosts gibt es Allowlist + DNS-Rebinding-Schutz.

Tools, die es gibt:

minutes_render_and_upload_docx
plus list_tools / tool_help (liefert Schema-Hints & Beispiele -> argument-gefuehrt moeglich)

PRIMARY Workflow (Claude Desktop):

Nutzer zieht Transcript-Datei in Claude Desktop (Chat).
LLM extrahiert strukturierte Minutes (gem. Schema) aus dem Chat-Kontext.
minutes_render_and_upload_docx validiert + rendert aus Template -> gibt Download-Link zur DOCX.
Der Server hostet die DOCX temporaer unter /download/<id>.

Schema/Constraints (wichtigste):

Pflicht: title, date, attendees, summary, decisions, actions, open_questions
Limits u. a.: attendees<=60, summary<=10, Textlaengen bis 500, date = YYYY-MM-DD
output.fileName optional, max 120, nur [A-Za-z0-9 _.-], kein Pfad, muss .docx enden

Template/Output: DOCX_TEMPLATE_PATH, OUTPUT_FILENAME_PATTERN

Tests:
HTTP Smoke Test vorhanden: tsx scripts/http_smoke_test.ts (akzeptiert JSON oder event-stream)
Contract Test vorhanden: npm run test:contract (validiert text-only Link + echter DOCX-Download)



1. Client/Host ruft MCP per HTTP `/mcp` mit JSON-RPC auf.  
2. minutes_render_and_upload_docx validiert die Minutes und rendert DOCX.  
3. DOCX wird temporaer im Server gehalten (RAM) und ein Link `/download/<id>` ausgegeben.  
4. Client laedt die DOCX ueber den Link herunter und kann sie manuell hochladen.  

WORKFLOW (1..N) ? End?to?End bis DOCX Download

Client/Host
  | tools/call minutes_render_and_upload_docx (minutes)
  v
MCP Server
  | renderMinutesDocx (Docxtemplater)
  | putDownload (in-memory store)
  v
HTTP Download: /download/<id>

Code-Map (wo passiert was)

Server Start/Transport: index.ts (main, StreamableHTTPServerTransport, /download route).
DOCX Rendering: render.ts (renderMinutesDocx).
Download Store: storage/downloadStore.ts (put/get download entries).
Tool: minutes_render_and_upload_docx.ts (validate + render + link).

Env-Variablen

Pflicht:
- MCP_HTTP_PORT
- DOCX_TEMPLATE_PATH
Optional:
- MCP_HTTP_HOST (default 0.0.0.0)
- MCP_ALLOWED_HOSTS / MCP_ALLOWED_ORIGINS (Allowlist)
- OUTPUT_FILENAME_PATTERN
- LOG_LEVEL
- ALLOW_X_USER_TOKEN (lokal, nicht Production)

